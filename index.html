<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
      }

      body {
        background: #2b2b2b;
        font-family: Arial, sans-serif;
      }
      .rain {
        pointer-events: none;
        position: absolute;
        width: 2px;
        height: 100%;
        bottom: 100%;
        background: linear-gradient(
          to bottom,
          rgba(255, 255, 255, 0) 0%,
          rgba(255, 255, 255, 0) 50%,
          rgba(255, 255, 255, 0.3) 80%,
          rgba(255, 255, 255, 0) 100%
        );
        animation: fall linear infinite;
      }

      @keyframes fall {
        0% {
          transform: translateY(0%);
        }
        100% {
          transform: translateY(100%);
        }
      }

      .splash {
        pointer-events: none;
        position: absolute;
        width: 20px; /* Increase the size */
        height: 20px; /* Increase the size */
        border-radius: 50%;
        background: transparent; /* Remove the solid background color */
        border: 1px solid rgba(255, 255, 255, 0.6); /* Add border for the outline */
        opacity: 0;
        animation: splash linear infinite;
      }

      @keyframes splash {
        0% {
          transform: scale(0);
          opacity: 1;
        }
        100% {
          transform: scale(1);
          opacity: 0;
        }
      }

      #sound-toggle {
        position: fixed;
        top: 10px;
        right: 10px;
        background: transparent;
        border: none;
        cursor: pointer;
        width: 56px;
        height: 56px;
        padding: 0;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="content">
        <button id="sound-toggle">
          <svg viewBox="0 0 24 24" fill="white" width="48" height="48">
            <path
              d="M3 9h2l3.5-4v14l-3.5-4H3V9zm13.5 3c0 1.77-1.02 3.29-2.5 4.03v1.97c1.91-1.12 3.5-3.32 3.5-6 0-2.68-1.59-4.88-3.5-6v1.97c1.48.74 2.5 2.26 2.5 4.03zm-2 0c0 1.37-.81 2.54-2 3.09v-6.19c1.19.54 2 1.71 2 3.1z"
            ></path>
          </svg>
        </button>
        <!-- Your blog content goes here -->
      </div>
    </div>
    <div id="raindrops"></div>

    <script>
      const numberOfRaindrops = 100;
      const maxBottomOffset = 40;
      const raindropsContainer = document.getElementById('raindrops');

      function getRandom(min, max) {
        return Math.random() * (max - min) + min;
      }

      for (let i = 0; i < numberOfRaindrops; i++) {
        const raindrop = document.createElement('div');
        raindrop.classList.add('rain');
        raindrop.style.left = `${getRandom(0, 100)}%`;
        raindrop.style.animationDuration = `${getRandom(2, 4)}s`;
        raindrop.style.animationDelay = `${getRandom(0, 2)}s`;
        raindrop.style.opacity = `${getRandom(0.1, 0.9)}`;

        const bottomOffset = getRandom(0, maxBottomOffset);
        const scaleFactor = (100 - bottomOffset) / 100;

        raindrop.style.height = `${scaleFactor * 100}%`; // Randomize the height between 30% and 100%
        raindrop.style.width = `${scaleFactor * 2}px`; // Scale the width according to the height

        const splash = document.createElement('div');
        splash.classList.add('splash');
        splash.style.left = `${parseFloat(raindrop.style.left)}%`;
        splash.style.bottom = `${bottomOffset}%`;
        splash.style.animationDuration = raindrop.style.animationDuration;
        const raindropAnimationDelay = parseFloat(
          raindrop.style.animationDelay
        );
        const raindropAnimationDuration = parseFloat(
          raindrop.style.animationDuration
        );
        splash.style.animationDelay = `${
          raindropAnimationDelay + raindropAnimationDuration
        }s`;

        const splashScaleFactor =
          (maxBottomOffset - parseFloat(splash.style.bottom)) / maxBottomOffset;
        splash.style.width = `${5 + getRandom(10, 40) * splashScaleFactor}px`; // Scale the width according to the bottom position
        splash.style.height = splash.style.width; // Set the height equal to the width
        splash.style.borderWidth = `${splashScaleFactor}px`; // Scale the border width according to the bottom position

        raindropsContainer.appendChild(raindrop);
        raindropsContainer.appendChild(splash);
      }

      function createPinkNoise(context) {
        const bufferSize = 4096;
        const pinkNoiseNode = context.createScriptProcessor(bufferSize, 1, 1);
        let b0, b1, b2, b3, b4, b5, b6;
        b0 = b1 = b2 = b3 = b4 = b5 = b6 = 0.0;

        pinkNoiseNode.onaudioprocess = function (e) {
          const output = e.outputBuffer.getChannelData(0);
          for (let i = 0; i < bufferSize; i++) {
            const white = Math.random() * 2 - 1;
            b0 = 0.99886 * b0 + white * 0.0555179;
            b1 = 0.99332 * b1 + white * 0.0750759;
            b2 = 0.969 * b2 + white * 0.153852;
            b3 = 0.8665 * b3 + white * 0.3104856;
            b4 = 0.55 * b4 + white * 0.5329522;
            b5 = -0.7616 * b5 - white * 0.016898;
            output[i] = b0 + b1 + b2 + b3 + b4 + b5 + b6 + white * 0.5362;
            output[i] *= 0.11; // (roughly) compensate for gain
            b6 = white * 0.115926;
          }
        };

        return pinkNoiseNode;
      }

      function playRainSound() {
        const audioContext = new (window.AudioContext ||
          window.webkitAudioContext)();
        const pinkNoiseNode = createPinkNoise(audioContext);
        pinkNoiseNode.connect(audioContext.destination);
      }

      let audioContext;
      let pinkNoiseNode;
      let isPlaying = false;

      function toggleRainSound() {
        if (!audioContext) {
          audioContext = new (window.AudioContext ||
            window.webkitAudioContext)();
          pinkNoiseNode = createPinkNoise(audioContext);
        }

        if (isPlaying) {
          pinkNoiseNode.disconnect(audioContext.destination);
        } else {
          pinkNoiseNode.connect(audioContext.destination);
        }

        isPlaying = !isPlaying;
      }

      document
        .getElementById('sound-toggle')
        .addEventListener('click', toggleRainSound);
    </script>
  </body>
</html>
